<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ Crear ImÃ¡genes BÃ¡sicas</title>
</head>
<body>
    <h1>Generando imÃ¡genes...</h1>
    <div id="status"></div>

    <script src="config.js"></script>
    <script>
        function crearImagenSVG(nombre, emoji, color) {
            return `data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200">
                    <defs>
                        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:${color};stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <rect width="300" height="200" fill="url(#grad)" rx="10"/>
                    <text x="150" y="80" font-family="Arial" font-size="50" text-anchor="middle" fill="white">${emoji}</text>
                    <text x="150" y="120" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="white">${nombre}</text>
                    <text x="150" y="180" font-family="Arial" font-size="12" text-anchor="middle" fill="rgba(255,255,255,0.7)">Las Delicias de la Abuela</text>
                </svg>
            `)}`;
        }

        function obtenerEmojiYColor(producto) {
            const emojis = {
                'Tinto': { emoji: 'â˜•', color: '#8B4513' },
                'Pintaito': { emoji: 'ğŸ¥›', color: '#DEB887' },
                'Milo': { emoji: 'ğŸ«', color: '#D2691E' },
                'AromÃ¡tica': { emoji: 'ğŸŒ¿', color: '#228B22' },
                'Chocolate': { emoji: 'ğŸ«', color: '#8B4513' },
                'Cifrut': { emoji: 'ğŸ§ƒ', color: '#FF6347' },
                'Pony Malta': { emoji: 'ğŸ¥¤', color: '#DAA520' },
                'Coca-Cola': { emoji: 'ğŸ¥¤', color: '#DC143C' },
                'Gaseosa Inn': { emoji: 'ğŸ¥¤', color: '#4169E1' },
                'Agua': { emoji: 'ğŸ’§', color: '#1E90FF' },
                'Pastel': { emoji: 'ğŸ¥Ÿ', color: '#CD853F' },
                'Torta': { emoji: 'ğŸ¥§', color: '#D2691E' },
                'Carne': { emoji: 'ğŸ¥©', color: '#A0522D' },
                'Aborrajados': { emoji: 'ğŸŒ', color: '#FFD700' },
                'Empanadas': { emoji: 'ğŸ¥Ÿ', color: '#CD853F' },
                'Papa': { emoji: 'ğŸ¥”', color: '#DEB887' },
                'Jugos': { emoji: 'ğŸ§ƒ', color: '#FF69B4' }
            };

            for (const [key, value] of Object.entries(emojis)) {
                if (producto.nombre.toLowerCase().includes(key.toLowerCase())) {
                    return value;
                }
            }

            return { emoji: 'ğŸ½ï¸', color: '#667eea' };
        }

        async function crearImagenesEnCarpeta() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = 'Creando imÃ¡genes...';

            if (typeof CONFIG === 'undefined') {
                statusDiv.innerHTML = 'âŒ CONFIG no disponible';
                return;
            }

            let imagenesCreadas = 0;

            for (const producto of CONFIG.productos) {
                try {
                    const { emoji, color } = obtenerEmojiYColor(producto);
                    const svgData = crearImagenSVG(producto.nombre, emoji, color);
                    
                    // Crear un enlace de descarga automÃ¡tico
                    const link = document.createElement('a');
                    const nombreArchivo = producto.imagen.split('/').pop();
                    link.download = nombreArchivo;
                    link.href = svgData;
                    
                    // Agregar al DOM temporalmente y hacer clic
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    imagenesCreadas++;
                    statusDiv.innerHTML = `Creadas ${imagenesCreadas}/${CONFIG.productos.length} imÃ¡genes...`;
                    
                    // PequeÃ±a pausa para no saturar el navegador
                    await new Promise(resolve => setTimeout(resolve, 100));
                    
                } catch (error) {
                    console.error('Error creando imagen para', producto.nombre, error);
                }
            }

            statusDiv.innerHTML = `
                âœ… Â¡${imagenesCreadas} imÃ¡genes creadas!<br><br>
                ğŸ“ <strong>Instrucciones:</strong><br>
                1. Las imÃ¡genes se han descargado automÃ¡ticamente<br>
                2. Mueve todas las imÃ¡genes a la carpeta <code>images/</code><br>
                3. Recarga tu sitio web para ver las imÃ¡genes<br><br>
                <button onclick="location.reload()">ğŸ”„ Crear de nuevo</button>
                <button onclick="window.open('index.html')">ğŸ  Ir al sitio</button>
            `;
        }

        // Iniciar automÃ¡ticamente
        window.addEventListener('load', () => {
            setTimeout(crearImagenesEnCarpeta, 1000);
        });
    </script>
</body>
</html>